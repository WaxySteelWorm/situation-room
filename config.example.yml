# Situation Room Configuration
# Copy this to config.yml and customize for your environment

server:
  host: "0.0.0.0"
  port: 8000
  debug: false

# Let's Encrypt / HTTPS Configuration
https:
  enabled: true
  domain: "vault.stormycloud.org"
  email: "admin@stormycloud.org"
  # Certificate storage path (inside container)
  cert_path: "/app/certs"

# Database Configuration
database:
  # Path to SQLite database file
  path: "/app/data/situation-room.db"

# Session Configuration
session:
  # Session timeout in minutes (users must re-login after inactivity)
  timeout_minutes: 15
  # Secret key for session signing (override via SITUATION_ROOM_SESSION_SECRET env var)
  secret_key: "change-me-in-production"

# Logging Configuration
logging:
  # Levels: debug, info, warning, error
  level: "info"

# Users Configuration
# Pre-configured users (no registration feature)
users:
  - username: "admin"
    email: "admin@example.com"
    # Password hash (bcrypt) - default: "admin123"
    # Generate new hash: python -c "import bcrypt; print(bcrypt.hashpw(b'yourpassword', bcrypt.gensalt()).decode())"
    password_hash: "$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/X4.VTtYo4H4DCW.WC"
    role: "admin"
  - username: "user1"
    email: "user1@example.com"
    password_hash: "$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/X4.VTtYo4H4DCW.WC"
    role: "user"

# SMTP Configuration (for email notifications)
smtp:
  enabled: false
  host: "smtp.example.com"
  port: 587
  username: ""
  password: ""
  from_email: "noreply@example.com"
  from_name: "Situation Room"
  use_tls: true

# Discord Webhook (for notifications)
discord:
  enabled: false
  webhook_url: "https://discord.com/api/webhooks/your-webhook-id/your-webhook-token"

# Encryption Configuration for Password Manager
# The master encryption key is derived from each user's master password
# This is an additional application-level salt
encryption:
  # Override via SITUATION_ROOM_ENCRYPTION_SALT env var
  salt: "change-me-in-production-32chars"

# SSO/OAuth Configuration
sso:
  enabled: true
  # Allow local password login alongside SSO
  allow_password_login: true
  # Auto-create users on first SSO login (if false, user must exist in users list)
  auto_create_users: true
  # Default role for auto-created users
  default_role: "user"
  # Restrict login to specific email domains (empty = allow all)
  allowed_domains:
    - "stormycloud.org"
  # OIDC/OAuth2 providers
  providers:
    # Google OAuth - configured for stormycloud.org domain
    - name: "Google"
      client_id: "YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
      client_secret: "YOUR_GOOGLE_CLIENT_SECRET"
      discovery_url: "https://accounts.google.com/.well-known/openid-configuration"
      scopes: ["openid", "email", "profile"]
      email_claim: "email"
      name_claim: "name"

    # Microsoft/Azure AD Example
    # - name: "Microsoft"
    #   client_id: "your-azure-app-client-id"
    #   client_secret: "your-azure-client-secret"
    #   discovery_url: "https://login.microsoftonline.com/{tenant-id}/v2.0/.well-known/openid-configuration"
    #   scopes: ["openid", "email", "profile"]
    #   email_claim: "email"
    #   name_claim: "name"

    # Okta Example
    # - name: "Okta"
    #   client_id: "your-okta-client-id"
    #   client_secret: "your-okta-client-secret"
    #   discovery_url: "https://your-domain.okta.com/.well-known/openid-configuration"
    #   scopes: ["openid", "email", "profile"]
    #   email_claim: "email"
    #   name_claim: "name"

    # Generic OIDC (manual endpoints)
    # - name: "Custom SSO"
    #   client_id: "your-client-id"
    #   client_secret: "your-client-secret"
    #   authorization_url: "https://sso.example.com/authorize"
    #   token_url: "https://sso.example.com/token"
    #   userinfo_url: "https://sso.example.com/userinfo"
    #   scopes: ["openid", "email", "profile"]
    #   email_claim: "email"
    #   name_claim: "name"

# Feature Flags (for future extensibility)
features:
  # Placeholder for v2 features
  monitoring_enabled: false
  ansible_enabled: false
  websocket_agents_enabled: false
